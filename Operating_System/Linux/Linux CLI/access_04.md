# Пользователи, права доступа
- Пользователи, права доступа: useradd, usermod, chown, chmod, passwd...
---
> :mag_right: По замыслу создателей, Linux-системы — это многопользовательские операционные системы, т.е. позволяющие нескольким пользователям работать с одной системой, не мешая друг другу. Но пользователи, совместно использующие доступ к файлам, рискуют раскрыть секретную информацию или даже потерять данные, если другие пользователи получат доступ к их файлам или каталогам. Чтобы решить эту проблему, в Linux добавили механизмы владения и прав доступа к файлам (или каталогам), чтобы обозначить, какие полномочия каждый пользователь имеет над определенным файлом (или каталогом).

# :bulb: Команда «useradd»
> Для создания пользователей из командной строки обычно используют команду adduser.
 
- Чтобы создать нового пользователя, выполняем команду adduser и указываем имя пользователя
> ⚠️ вместо devops укажите имя пользователя, которого вы создаете
 
```
sudo adduser devops
```
После запуска данной команды, вы должны ввести пароль для нового пользователя. Затем будет предложено ввести дополнительную информацию о пользователе: имя, номер комнаты (кабинета), телефоны и комментарий.

> :mag_right: Вводить эту информацию необязательно. Просто нажимайте Enter, чтобы пропустить ввод данных.
---
---
В результате выполнения команды adduser будут выполнены следующие действия
- Создается новый пользователь с именем, которое вы указали при выполнении команды.
- Создается группа с тем же именем.
- Создается домашний каталог пользователя в директории /home/имяпользователя 
- В домашний каталог копируются файлы из директории /etc/skel. В данной директории хранятся файлы, которые копируются в домашний каталог всех новых пользователей.

# :bulb: Команда «usermod»
> Команда usermod или изменить пользователя — это команда в Linux, которая используется для изменения свойств пользователя в Linux через командную строку. После создания пользователя нам иногда приходится менять его атрибуты, такие как пароль, каталог для входа и т. д
```
 usermod [опции] [синтаксис]
```
Здесь нас будут интересовать только несколько опций с помощью которых можно добавить пользователя в группу root linux.
- -G - дополнительные группы для пользователя;
- -a - добавить пользователя в дополнительные группы из параметра -G, а не заменять им текущее значение;
- -g - установить новую основную группу для пользователя, такая группа уже должна существовать, и все файлы в домашнем каталоге теперь будут принадлежать именно этой группе.

> :mag_right: Например, чтобы добавить пользователя в группу sudo linux используйте такую комбинацию:
```
sudo usermod -a -G wheel user
```
> :warning: Если вы не будете использовать опцию -a, и укажите только -G, то утилита затрет все группы, которые были заданы ранее, что может вызвать серьезные проблемы.

> :warning:  Например, вы хотите добавить пользователя в группу disk и стираете wheel, тогда вы больше не сможете пользоваться правами суперпользователя и вам придется сбрасывать пароль.
---
---
Теперь смотрим информацию о пользователе:
```
 id [user]
```
Мы можем видеть, что была добавлена указанная нами дополнительная группа и все группы, которые были раньше остались. Если вы хотите указать несколько групп, это можно сделать разделив их запятой:
```
 sudo usermod -a -G disks,vboxusers user
```
Основная группа пользователя соответствует его имени, но мы можем изменить ее на другую, например users:
```
 sudo usermod -g users user
```
> :mag_right: Теперь основная группа была изменена. Точно такие же опции вы можете использовать для добавления пользователя в группу sudo linux во время его создания с помощью команды useradd.

# :bulb: Команда «chown»
> Chown — от английского change own. Позволяет поменять или сменить владельца (пользователя) файла

Для этого, поможет следующая команда:
```
sudo chown userName avocado.txt
```
> :mag_right: В данном примере мы присвоили файл text.txt пользователю userName.

Если вы хотите поменять только группу, то можно воспользоваться командой chgrp:
```
sudo chgrp groupName avocado.txt
```
---
---
Для того чтобы не вводить 2 разные команды делают так:
```
sudo chown userName:groupName avocado.txt
```
> :mag_right: То есть вначале указывается владелец файла, а после группа:

```
sudo chown имя_владельца:имя_группы avocado.txt
```
> Если вам нужно поменять в директории владельца и группу, а там множество файлов и папок тогда используйте ключ -R:
```
sudo chown -R userName:groupName /home/sysadmin/fruits/
```
---
---
# :bulb: Команда «chmod»
> И так мы знаем, что существуют пользователи, группы. Теперь поговорим о правах доступа. Для чего этого необходимо? Например у вас есть директория в которой находятся личные файлы. Чтобы вы, владелец, например могли редактировать, просматривать файлы, группа, только видеть данные, файлы, а остальные пользователи которые не входят ни в одну из групп и не являются владельцами, вообще не могли ничего сделать, вот поэтому и необходимы права доступа.

Права на файл могут обозначаться цифрами и буквами:

|            | Цифрами | Буквами |
|------------|---------|---------|
| Чтение     |    4    |   r     |
| Запись     |    2    |   w     |
| Выполнение |    1    |   x     |
|            |    0    |   -     |

Значения прав в цифрах суммируются:
- полные права (rwx) 7  = 4 + 2 +1
- чтение и запись (rw-) 6  = 4 + 2 + 0
- чтение и выполнение (r-x) 5 = 4 + 0 + 1
- только чтение 4 (r—) = 4 + 0 + 0
- только запись 2 (-w-) = 0 + 2 + 0
- права отсутствуют (—) 0 = 0 + 0 + 0
---
---
<table>
	<tr>
  <th></th>
  <th></th>
	     <th>Владелец</th>
	     <th>Группа</th>
	     <th>Остальные</th>  
	</tr > 
 	<tr>
     <th></th>
     <th></th>
	    <th>u</th>
	    <th>g</th>
	    <th>o</th> 
	</tr > 
  	<tr>
     <td>права доступа буквы</td>
     <td>права доступа цифры</td>   
     <td></td>
     <td></td>
     <td></td>
 	</tr > 
  	<tr> 
     <td>rwxrwxrwx</td>
     <td>777</td> 
     <td colspan ="3">читают, записывают, выполняют все</td> 
   	</tr > 
</table>
